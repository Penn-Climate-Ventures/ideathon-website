{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport loader, { PageResourceStatus } from \"./loader\";\nimport shallowCompare from \"shallow-compare\";\n\nvar EnsureResources = function (_React$Component) {\n  _inherits(EnsureResources, _React$Component);\n\n  var _super = _createSuper(EnsureResources);\n\n  function EnsureResources(props) {\n    var _this;\n\n    _classCallCheck(this, EnsureResources);\n\n    _this = _super.call(this);\n    var location = props.location,\n        pageResources = props.pageResources;\n    _this.state = {\n      location: _objectSpread({}, location),\n      pageResources: pageResources || loader.loadPageSync(location.pathname)\n    };\n    return _this;\n  }\n\n  _createClass(EnsureResources, [{\n    key: \"loadResources\",\n    value: function loadResources(rawPath) {\n      var _this2 = this;\n\n      loader.loadPage(rawPath).then(function (pageResources) {\n        if (pageResources && pageResources.status !== PageResourceStatus.Error) {\n          _this2.setState({\n            location: _objectSpread({}, window.location),\n            pageResources: pageResources\n          });\n        } else {\n          window.history.replaceState({}, \"\", location.href);\n          window.location = rawPath;\n        }\n      });\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      if (!nextState.pageResources) {\n        this.loadResources(nextProps.location.pathname);\n        return false;\n      }\n\n      if (process.env.BUILD_STAGE === \"develop\" && nextState.pageResources.stale) {\n        this.loadResources(nextProps.location.pathname);\n        return false;\n      }\n\n      if (this.state.pageResources !== nextState.pageResources) {\n        return true;\n      }\n\n      if (this.state.pageResources.component !== nextState.pageResources.component) {\n        return true;\n      }\n\n      if (this.state.pageResources.json !== nextState.pageResources.json) {\n        return true;\n      }\n\n      if (this.state.location.key !== nextState.location.key && nextState.pageResources.page && (nextState.pageResources.page.matchPath || nextState.pageResources.page.path)) {\n        return true;\n      }\n\n      return shallowCompare(this, nextProps, nextState);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (process.env.NODE_ENV !== \"production\" && !this.state.pageResources) {\n        throw new Error(\"EnsureResources was not able to find resources for path: \\\"\" + this.props.location.pathname + \"\\\"\\nThis typically means that an issue occurred building components for that path.\\nRun `gatsby clean` to remove any cached elements.\");\n      }\n\n      return this.props.children(this.state);\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(_ref, prevState) {\n      var location = _ref.location;\n\n      if (prevState.location.href !== location.href) {\n        var pageResources = loader.loadPageSync(location.pathname);\n        return {\n          pageResources: pageResources,\n          location: _objectSpread({}, location)\n        };\n      }\n\n      return {\n        location: _objectSpread({}, location)\n      };\n    }\n  }]);\n\n  return EnsureResources;\n}(React.Component);\n\nexport default EnsureResources;","map":{"version":3,"sources":["/Users/aliristang/Desktop/prize-website/.cache/ensure-resources.js"],"names":["React","loader","PageResourceStatus","shallowCompare","EnsureResources","props","location","pageResources","state","loadPageSync","pathname","rawPath","loadPage","then","status","Error","setState","window","history","replaceState","href","nextProps","nextState","loadResources","process","env","BUILD_STAGE","stale","component","json","key","page","matchPath","path","NODE_ENV","children","prevState","Component"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport loader, { PageResourceStatus } from \"./loader\"\nimport shallowCompare from \"shallow-compare\"\n\nclass EnsureResources extends React.Component {\n  constructor(props) {\n    super()\n    const { location, pageResources } = props\n    this.state = {\n      location: { ...location },\n      pageResources: pageResources || loader.loadPageSync(location.pathname),\n    }\n  }\n\n  static getDerivedStateFromProps({ location }, prevState) {\n    if (prevState.location.href !== location.href) {\n      const pageResources = loader.loadPageSync(location.pathname)\n      return {\n        pageResources,\n        location: { ...location },\n      }\n    }\n\n    return {\n      location: { ...location },\n    }\n  }\n\n  loadResources(rawPath) {\n    loader.loadPage(rawPath).then(pageResources => {\n      if (pageResources && pageResources.status !== PageResourceStatus.Error) {\n        this.setState({\n          location: { ...window.location },\n          pageResources,\n        })\n      } else {\n        window.history.replaceState({}, ``, location.href)\n        window.location = rawPath\n      }\n    })\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    // Always return false if we're missing resources.\n    if (!nextState.pageResources) {\n      this.loadResources(nextProps.location.pathname)\n      return false\n    }\n\n    if (\n      process.env.BUILD_STAGE === `develop` &&\n      nextState.pageResources.stale\n    ) {\n      this.loadResources(nextProps.location.pathname)\n      return false\n    }\n\n    // Check if the component or json have changed.\n    if (this.state.pageResources !== nextState.pageResources) {\n      return true\n    }\n    if (\n      this.state.pageResources.component !== nextState.pageResources.component\n    ) {\n      return true\n    }\n\n    if (this.state.pageResources.json !== nextState.pageResources.json) {\n      return true\n    }\n    // Check if location has changed on a page using internal routing\n    // via matchPath configuration.\n    if (\n      this.state.location.key !== nextState.location.key &&\n      nextState.pageResources.page &&\n      (nextState.pageResources.page.matchPath ||\n        nextState.pageResources.page.path)\n    ) {\n      return true\n    }\n    return shallowCompare(this, nextProps, nextState)\n  }\n\n  render() {\n    if (process.env.NODE_ENV !== `production` && !this.state.pageResources) {\n      throw new Error(\n        `EnsureResources was not able to find resources for path: \"${this.props.location.pathname}\"\nThis typically means that an issue occurred building components for that path.\nRun \\`gatsby clean\\` to remove any cached elements.`\n      )\n    }\n\n    return this.props.children(this.state)\n  }\n}\n\nexport default EnsureResources\n"]},"metadata":{},"sourceType":"module"}